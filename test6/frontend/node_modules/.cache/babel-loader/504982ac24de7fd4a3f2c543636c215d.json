{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import LoadingIndicator from'../common/LoadingIndicator';import{getUserProfile}from'../util/APIUtils';import{fetchFav,deleteFavById}from'../util/APIAdmin';import{Link}from\"react-router-dom\";import\"./Profile.css\";var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_possibleConstructorReturn(this,_getPrototypeOf(Profile).call(this,props));_this.state={user:null,isLoading:false,favs:[]};_this.loadUserProfile=_this.loadUserProfile.bind(_assertThisInitialized(_this));_this.loadFav=_this.loadFav.bind(_assertThisInitialized(_this));_this.onDelete=_this.onDelete.bind(_assertThisInitialized(_this));return _this;}_createClass(Profile,[{key:\"onDelete\",value:function onDelete(fno){var _this2=this;deleteFavById(fno).then(function(res){_this2.setState({favs:_this2.state.favs.filter(function(fav){return fav.fno!==fno;})});});}},{key:\"loadFav\",value:function loadFav(username){var _this3=this;fetchFav(username).then(function(res){_this3.setState({favs:res},function(){console.log('profile');console.log(res);});}).catch(function(error){console.log('profile');console.log(error);});}},{key:\"loadUserProfile\",value:function loadUserProfile(username){var _this4=this;this.setState({isLoading:true});getUserProfile(username).then(function(response){_this4.setState({user:response,isLoading:false},function(){console.log('profile');console.log(response);});}).catch(function(error){if(error.status===404){_this4.setState({notFound:true,isLoading:false});}else{_this4.setState({serverError:true,isLoading:false});}});}},{key:\"componentDidMount\",value:function componentDidMount(){var username=this.props.match.params.username;this.loadUserProfile(username);this.loadFav(username);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(nextProps){if(this.props.match.params.username!==nextProps.match.params.username){this.loadUserProfile(nextProps.match.params.username);}}},{key:\"render\",value:function render(){if(this.state.isLoading){return React.createElement(LoadingIndicator,null);}return React.createElement(\"div\",{className:\"profile\"},this.state.user?React.createElement(\"div\",{className:\"profile_container\"},React.createElement(\"div\",{className:\"user-profile\"},React.createElement(\"div\",{className:\"user-details\"},React.createElement(\"div\",{className:\"user-summary\"},React.createElement(\"div\",{className:\"full-name\"},this.state.user.name),React.createElement(\"div\",{className:\"username\"},\"@\",this.state.user.username))))):null);}}]);return Profile;}(Component);export default Profile;","map":{"version":3,"sources":["C:/Users/Son/Desktop/test6/test6/frontend/src/profile/Profile.js"],"names":["React","Component","LoadingIndicator","getUserProfile","fetchFav","deleteFavById","Link","Profile","props","state","user","isLoading","favs","loadUserProfile","bind","loadFav","onDelete","fno","then","res","setState","filter","fav","username","console","log","catch","error","response","status","notFound","serverError","match","params","nextProps","name"],"mappings":"4zBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,gBAAP,KAA8B,4BAA9B,CACA,OAASC,cAAT,KAA+B,kBAA/B,CACA,OAAQC,QAAR,CAAkBC,aAAlB,KAAsC,kBAAtC,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,MAAO,eAAP,C,GAEMC,CAAAA,O,iEACF,iBAAYC,KAAZ,CAAmB,yCACf,yEAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACTC,IAAI,CAAE,IADG,CAETC,SAAS,CAAE,KAFF,CAGTC,IAAI,CAAC,EAHI,CAAb,CAKA,MAAKC,eAAL,CAAuB,MAAKA,eAAL,CAAqBC,IAArB,+BAAvB,CACA,MAAKC,OAAL,CAAe,MAAKA,OAAL,CAAaD,IAAb,+BAAf,CACA,MAAKE,QAAL,CAAgB,MAAKA,QAAL,CAAcF,IAAd,+BAAhB,CATe,aAUlB,C,8DAEQG,G,CAAI,iBACTZ,aAAa,CAACY,GAAD,CAAb,CACKC,IADL,CACU,SAAAC,GAAG,CAAI,CACT,MAAI,CAACC,QAAL,CAAc,CAACR,IAAI,CAAC,MAAI,CAACH,KAAL,CAAWG,IAAX,CAAgBS,MAAhB,CAAuB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACL,GAAJ,GAAYA,GAAhB,EAA1B,CAAN,CAAd,EACH,CAHL,EAIH,C,wCAEOM,Q,CAAS,iBACbnB,QAAQ,CAACmB,QAAD,CAAR,CACKL,IADL,CACU,SAAAC,GAAG,CAAI,CACT,MAAI,CAACC,QAAL,CAAc,CACdR,IAAI,CAAGO,GADO,CAAd,CAEG,UAAU,CACTK,OAAO,CAACC,GAAR,CAAY,SAAZ,EACAD,OAAO,CAACC,GAAR,CAAYN,GAAZ,EACH,CALD,EAMH,CARL,EASKO,KATL,CASW,SAAAC,KAAK,CAAI,CACZH,OAAO,CAACC,GAAR,CAAY,SAAZ,EAEAD,OAAO,CAACC,GAAR,CAAYE,KAAZ,EACH,CAbL,EAcH,C,wDAGeJ,Q,CAAU,iBACtB,KAAKH,QAAL,CAAc,CACVT,SAAS,CAAE,IADD,CAAd,EAIAR,cAAc,CAACoB,QAAD,CAAd,CACCL,IADD,CACM,SAAAU,QAAQ,CAAI,CACd,MAAI,CAACR,QAAL,CAAc,CACVV,IAAI,CAAEkB,QADI,CAEVjB,SAAS,CAAE,KAFD,CAAd,CAGG,UAAU,CACTa,OAAO,CAACC,GAAR,CAAY,SAAZ,EAEAD,OAAO,CAACC,GAAR,CAAYG,QAAZ,EACH,CAPD,EAQH,CAVD,EAUGF,KAVH,CAUS,SAAAC,KAAK,CAAI,CACd,GAAGA,KAAK,CAACE,MAAN,GAAiB,GAApB,CAAyB,CACrB,MAAI,CAACT,QAAL,CAAc,CACVU,QAAQ,CAAE,IADA,CAEVnB,SAAS,CAAE,KAFD,CAAd,EAIH,CALD,IAKO,CACH,MAAI,CAACS,QAAL,CAAc,CACVW,WAAW,CAAE,IADH,CAEVpB,SAAS,CAAE,KAFD,CAAd,EAIH,CACJ,CAtBD,EAuBH,C,6DAEmB,CAChB,GAAMY,CAAAA,QAAQ,CAAG,KAAKf,KAAL,CAAWwB,KAAX,CAAiBC,MAAjB,CAAwBV,QAAzC,CACA,KAAKV,eAAL,CAAqBU,QAArB,EACA,KAAKR,OAAL,CAAaQ,QAAb,EACH,C,8DAEkBW,S,CAAW,CAC1B,GAAG,KAAK1B,KAAL,CAAWwB,KAAX,CAAiBC,MAAjB,CAAwBV,QAAxB,GAAqCW,SAAS,CAACF,KAAV,CAAgBC,MAAhB,CAAuBV,QAA/D,CAAyE,CACrE,KAAKV,eAAL,CAAqBqB,SAAS,CAACF,KAAV,CAAgBC,MAAhB,CAAuBV,QAA5C,EACH,CACJ,C,uCAEQ,CAEL,GAAG,KAAKd,KAAL,CAAWE,SAAd,CAAyB,CACrB,MAAO,qBAAC,gBAAD,MAAP,CACH,CAID,MACI,4BAAK,SAAS,CAAC,SAAf,EAEQ,KAAKF,KAAL,CAAWC,IAAX,CACI,2BAAK,SAAS,CAAC,mBAAf,EACI,2BAAK,SAAS,CAAC,cAAf,EACI,2BAAK,SAAS,CAAC,cAAf,EAEI,2BAAK,SAAS,CAAC,cAAf,EACI,2BAAK,SAAS,CAAC,WAAf,EAA4B,KAAKD,KAAL,CAAWC,IAAX,CAAgByB,IAA5C,CADJ,CAEI,2BAAK,SAAS,CAAC,UAAf,MAA4B,KAAK1B,KAAL,CAAWC,IAAX,CAAgBa,QAA5C,CAFJ,CAFJ,CADJ,CADJ,CADJ,CAaG,IAfX,CADJ,CAoBH,C,qBA5GiBtB,S,EA+GtB,cAAeM,CAAAA,OAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport LoadingIndicator  from '../common/LoadingIndicator';\r\nimport { getUserProfile } from '../util/APIUtils';\r\nimport {fetchFav, deleteFavById} from '../util/APIAdmin';\r\nimport {Link} from \"react-router-dom\";\r\nimport \"./Profile.css\";\r\n\r\nclass Profile extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: null,\r\n            isLoading: false,\r\n            favs:[]\r\n        }\r\n        this.loadUserProfile = this.loadUserProfile.bind(this);\r\n        this.loadFav = this.loadFav.bind(this);\r\n        this.onDelete = this.onDelete.bind(this);\r\n    }\r\n\r\n    onDelete(fno){\r\n        deleteFavById(fno)\r\n            .then(res => {\r\n                this.setState({favs:this.state.favs.filter(fav => fav.fno !== fno)})\r\n            })\r\n    }\r\n\r\n    loadFav(username){\r\n        fetchFav(username)\r\n            .then(res => {\r\n                this.setState({\r\n                favs : res\r\n                }, function(){\r\n                    console.log('profile');\r\n                    console.log(res)\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.log('profile');\r\n\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n\r\n    loadUserProfile(username) {\r\n        this.setState({\r\n            isLoading: true\r\n        });\r\n\r\n        getUserProfile(username)\r\n        .then(response => {\r\n            this.setState({\r\n                user: response,\r\n                isLoading: false\r\n            }, function(){\r\n                console.log('profile');\r\n\r\n                console.log(response);\r\n            });\r\n        }).catch(error => {\r\n            if(error.status === 404) {\r\n                this.setState({\r\n                    notFound: true,\r\n                    isLoading: false\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    serverError: true,\r\n                    isLoading: false\r\n                });        \r\n            }\r\n        });        \r\n    }\r\n\r\n    componentDidMount() {\r\n        const username = this.props.match.params.username;\r\n        this.loadUserProfile(username);\r\n        this.loadFav(username);\r\n    }\r\n\r\n    componentDidUpdate(nextProps) {\r\n        if(this.props.match.params.username !== nextProps.match.params.username) {\r\n            this.loadUserProfile(nextProps.match.params.username);\r\n        }        \r\n    }\r\n\r\n    render() {\r\n\r\n        if(this.state.isLoading) {\r\n            return <LoadingIndicator />;\r\n        }\r\n\r\n      \r\n       \r\n        return (\r\n            <div className=\"profile\">\r\n                { \r\n                    this.state.user ? (\r\n                        <div className=\"profile_container\">\r\n                            <div className=\"user-profile\">\r\n                                <div className=\"user-details\">\r\n                                    \r\n                                    <div className=\"user-summary\">\r\n                                        <div className=\"full-name\">{this.state.user.name}</div>\r\n                                        <div className=\"username\">@{this.state.user.username}</div>\r\n                                    </div>\r\n                                </div> \r\n                            </div>  \r\n                        \r\n                        </div>\r\n                    ): null               \r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}