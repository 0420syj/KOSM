{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component,useState}from'react';//import Home from './home/Home';\nimport{withRouter,Switch,Link,Route,BrowserRouter}from'react-router-dom';import{getCurrentUser}from'../util/APIUtils';import{ACCESS_TOKEN}from'../constants';import SignUp from'./signup/SignUp';import Login from'/login/Login';import{Layout,notification}from'antd';var Content=Layout.Content;import{render}from'node-sass';import{LayoutContext}from'antd/lib/layout/layout';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={currentUser:null,isAuthenticated:false,isLoading:false};_this.handleLogout=_this.handleLogout.bind(_assertThisInitialized(_this));_this.loadCurrentUser=_this.loadCurrentUser.bind(_assertThisInitialized(_this));_this.handleLogin=_this.handleLogin.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"loadCurrentUser\",value:function loadCurrentUser(){var _this2=this;this.setState({isLoading:true});getCurrentUser().then(function(response){_this2.setState({currentUser:response,isAuthenticated:true,isLoading:false});}).catch(function(error){_this2.setState({isLoading:false});});}},{key:\"componentDidMount\",value:function componentDidMount(){this.loadCurrentUser();}// Handle Logout, Set currentUser and isAuthenticated state which will be passed to other components\n},{key:\"handleLogout\",value:function handleLogout(){var redirectTo=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"/\";var notificationType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"success\";var description=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"You're successfully logged out.\";localStorage.removeItem(ACCESS_TOKEN);this.setState({currentUser:null,isAuthenticated:false});this.props.history.push(redirectTo);}},{key:\"handleLogin\",value:function handleLogin(){this.loadCurrentUser();this.props.history.push(\"/\");}},{key:\"render\",value:function render(){var _this3=this;if(this.state.isLoading){return React.createElement(LoadingIndicator,null);}return React.createElement(Layout,{className:\"app-container\"},React.createElement(AppHeader,{isAuthenticated:this.state.isAuthenticated,currentUser:this.state.currentUser,onLogout:this.handleLogout}),React.createElement(Content,{className:\"app-content\"},React.createElement(\"div\",{className:\"container\"},React.createElement(Switch,null,React.createElement(Route,{path:\"/login\",render:function render(props){return React.createElement(Login,Object.assign({onLogin:_this3.handleLogin},props));}}),React.createElement(Route,{exact:true,path:\"/signup\",component:SignUp}),React.createElement(Route,{path:\"/users/:username\",render:function render(props){return React.createElement(Profile,Object.assign({isAuthenticated:_this3.state.isAuthenticated,currentUser:_this3.state.currentUser},props));}})))));}}]);return App;}(Component);export default withRouter(App);","map":{"version":3,"sources":["C:/Users/Son/Desktop/test6/test6/frontend/src/App.js"],"names":["React","Component","useState","withRouter","Switch","Link","Route","BrowserRouter","getCurrentUser","ACCESS_TOKEN","SignUp","Login","Layout","notification","Content","render","LayoutContext","App","props","state","currentUser","isAuthenticated","isLoading","handleLogout","bind","loadCurrentUser","handleLogin","setState","then","response","catch","error","redirectTo","notificationType","description","localStorage","removeItem","history","push"],"mappings":"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","sourcesContent":["import React, {Component, useState} from 'react';\n//import Home from './home/Home';\n\nimport {withRouter, Switch,Link, Route, BrowserRouter} from 'react-router-dom';\nimport { getCurrentUser } from '../util/APIUtils';\nimport { ACCESS_TOKEN } from '../constants';\n\nimport SignUp from './signup/SignUp';\nimport Login from '/login/Login';\n\nimport { Layout, notification } from 'antd';\nconst { Content } = Layout;\n\nimport { render } from 'node-sass';\nimport { LayoutContext } from 'antd/lib/layout/layout';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentUser: null,\n      isAuthenticated: false,\n      isLoading: false\n    }\n    this.handleLogout = this.handleLogout.bind(this);\n    this.loadCurrentUser = this.loadCurrentUser.bind(this);\n    this.handleLogin = this.handleLogin.bind(this);\n  }\n\n  loadCurrentUser() {\n    this.setState({\n      isLoading: true\n    });\n    getCurrentUser()\n    .then(response => {\n      this.setState({\n        currentUser: response,\n        isAuthenticated: true,\n        isLoading: false\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false\n      });  \n    });\n  }\n\n  componentDidMount() {\n    this.loadCurrentUser();\n  }\n\n  // Handle Logout, Set currentUser and isAuthenticated state which will be passed to other components\n  handleLogout(redirectTo=\"/\", notificationType=\"success\", description=\"You're successfully logged out.\") {\n    localStorage.removeItem(ACCESS_TOKEN);\n\n    this.setState({\n      currentUser: null,\n      isAuthenticated: false\n    });\n\n    this.props.history.push(redirectTo);\n  }\n\n  handleLogin() {\n  \n    this.loadCurrentUser();\n    this.props.history.push(\"/\");\n  }\n\n  render(){\n    if(this.state.isLoading) {\n      return <LoadingIndicator />\n    }\n    return (\n      <Layout className=\"app-container\">\n      <AppHeader isAuthenticated={this.state.isAuthenticated} \n        currentUser={this.state.currentUser} \n        onLogout={this.handleLogout} />\n\n      <Content className=\"app-content\">\n        <div className=\"container\">\n          <Switch>      \n          \n            <Route path=\"/login\" \n              render={(props) => <Login onLogin={this.handleLogin} {...props} />}></Route>\n            <Route exact path='/signup' component={SignUp}/>\n            <Route path=\"/users/:username\" \n              render={(props) => <Profile isAuthenticated={this.state.isAuthenticated} currentUser={this.state.currentUser} {...props}  />}/>\n          </Switch>\n        </div>\n      </Content>\n      </Layout>\n    );\n  }\n}\nexport default withRouter(App);"]},"metadata":{},"sourceType":"module"}