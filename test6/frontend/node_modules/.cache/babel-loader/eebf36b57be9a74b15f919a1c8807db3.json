{"ast":null,"code":"import{API_BASE_URL,ACCESS_TOKEN}from'../constants';var request=function request(options){var headers=new Headers({'Content-Type':'application/json'});if(localStorage.getItem(ACCESS_TOKEN)){headers.append('Authorization','Bearer '+localStorage.getItem(ACCESS_TOKEN));}var defaults={headers:headers};options=Object.assign({},defaults,options);return fetch(options.url,options).then(function(response){return response.json().then(function(json){if(!response.ok){return Promise.reject(json);}return json;});});};var deleteRequest=function deleteRequest(options){var headers=new Headers();if(localStorage.getItem(ACCESS_TOKEN)){headers.append('Authorization','Bearer '+localStorage.getItem(ACCESS_TOKEN));}var defaults={headers:headers};options=Object.assign({},defaults,options);return fetch(options.url,options);};export function login(loginRequest){return request({url:API_BASE_URL+\"/api/auth/signin\",method:'POST',body:JSON.stringify(loginRequest)});}export function signup(signupRequest){return request({url:API_BASE_URL+\"/api/auth/signup\",method:'POST',body:JSON.stringify(signupRequest)});}export function checkUsernameAvailability(username){return request({url:API_BASE_URL+\"/user/checkUsernameAvailability?username=\"+username,method:'GET'});}export function checkEmailAvailability(email){return request({url:API_BASE_URL+\"/user/checkEmailAvailability?email=\"+email,method:'GET'});}export function getCurrentUser(){if(!localStorage.getItem(ACCESS_TOKEN)){return Promise.reject(\"No access token set.\");}return request({url:API_BASE_URL+\"/api/user/me\",method:'GET'});}export function getUserProfile(username){return request({url:API_BASE_URL+\"/users/\"+username,method:'GET'});}export function uploadComment(id,username,comment){var formData=new FormData();formData.append('user',username);formData.append('comment',comment);return request({url:API_BASE_URL+\"/saveComment/\"+id,method:'POST',body:formData});}export function getComment(id){return request({url:API_BASE_URL+\"/getComment/\"+id,method:'GET'});}export function deleteComment(id){return deleteRequest({url:API_BASE_URL+\"/deleteComment/\"+id,method:'DELETE'});}export function fetchRate(id,user){return request({url:API_BASE_URL+\"/fetchRate/\"+id+\"/\"+user,method:'GET'});}export function getAvgRate(id){return request({url:API_BASE_URL+\"/getAvgRate/\"+id,method:'GET'});}","map":{"version":3,"sources":["C:/Users/Son/Desktop/test6/test6/frontend/src/util/APIUtils.js"],"names":["API_BASE_URL","ACCESS_TOKEN","request","options","headers","Headers","localStorage","getItem","append","defaults","Object","assign","fetch","url","then","response","json","ok","Promise","reject","deleteRequest","login","loginRequest","method","body","JSON","stringify","signup","signupRequest","checkUsernameAvailability","username","checkEmailAvailability","email","getCurrentUser","getUserProfile","uploadComment","id","comment","formData","FormData","getComment","deleteComment","fetchRate","user","getAvgRate"],"mappings":"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","sourcesContent":["import { API_BASE_URL, ACCESS_TOKEN } from '../constants';\r\n\r\nconst request = (options) => {\r\n    const headers = new Headers({\r\n        'Content-Type' : 'application/json',\r\n    })\r\n\r\n    if(localStorage.getItem(ACCESS_TOKEN)) {\r\n        headers.append('Authorization', 'Bearer ' + localStorage.getItem(ACCESS_TOKEN))\r\n    }\r\n\r\n    const defaults = {headers: headers};\r\n    options = Object.assign({}, defaults, options);\r\n\r\n    return fetch(options.url, options)\r\n    .then(response => \r\n        response.json().then(json => {\r\n            if(!response.ok) {\r\n                return Promise.reject(json);\r\n            }\r\n            return json;\r\n        })\r\n    );\r\n};\r\n\r\n\r\nconst deleteRequest = (options) => {\r\n    const headers = new Headers()\r\n\r\n    if(localStorage.getItem(ACCESS_TOKEN)) {\r\n        headers.append('Authorization', 'Bearer ' + localStorage.getItem(ACCESS_TOKEN))\r\n    }\r\n\r\n    const defaults = {headers: headers};\r\n    options = Object.assign({}, defaults, options);\r\n\r\n    return fetch(options.url, options)\r\n}\r\n\r\n\r\nexport function login(loginRequest) {\r\n    return request({\r\n        url: API_BASE_URL + \"/api/auth/signin\",\r\n        method: 'POST',\r\n        body: JSON.stringify(loginRequest)\r\n    });\r\n}\r\n\r\nexport function signup(signupRequest) {\r\n    return request({\r\n        url: API_BASE_URL + \"/api/auth/signup\",\r\n        method: 'POST',\r\n        body: JSON.stringify(signupRequest)\r\n    });\r\n}\r\n\r\n\r\nexport function checkUsernameAvailability(username) {\r\n    return request({\r\n        url: API_BASE_URL + \"/user/checkUsernameAvailability?username=\" + username,\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\nexport function checkEmailAvailability(email) {\r\n    return request({\r\n        url: API_BASE_URL + \"/user/checkEmailAvailability?email=\" + email,\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\n\r\nexport function getCurrentUser() {\r\n    if(!localStorage.getItem(ACCESS_TOKEN)) {\r\n        return Promise.reject(\"No access token set.\");\r\n    }\r\n    return request({\r\n        url: API_BASE_URL + \"/api/user/me\",\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\nexport function getUserProfile(username) {\r\n    return request({\r\n        url: API_BASE_URL + \"/users/\" + username,\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\nexport function uploadComment(id, username, comment){\r\n    const formData = new FormData();\r\n    formData.append('user', username);\r\n    formData.append('comment', comment);\r\n    return request({\r\n        url: API_BASE_URL + \"/saveComment/\" + id,\r\n        method: 'POST',\r\n        body: formData\r\n    });\r\n}\r\n\r\nexport function getComment(id){\r\n    return request({\r\n        url : API_BASE_URL + \"/getComment/\" + id,\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\nexport function deleteComment(id) {\r\n    return deleteRequest({\r\n        url: API_BASE_URL + \"/deleteComment/\" + id,\r\n        method: 'DELETE'\r\n    });\r\n}\r\n\r\nexport function fetchRate(id, user){\r\n    return request({\r\n        url : API_BASE_URL + \"/fetchRate/\" + id + \"/\" + user,\r\n        method: 'GET'\r\n    });\r\n}\r\n\r\nexport function getAvgRate(id){\r\n    return request({\r\n        url : API_BASE_URL + \"/getAvgRate/\" + id,\r\n        method: 'GET'\r\n    });\r\n}"]},"metadata":{},"sourceType":"module"}