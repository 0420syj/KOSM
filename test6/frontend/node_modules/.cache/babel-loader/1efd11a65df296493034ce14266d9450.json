{"ast":null,"code":"import _assertThisInitialized from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Son\\\\Desktop\\\\test6\\\\test6\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component,useState}from'react';import'./Login.css';import{login}from'../util/APIUtils';import{ACCESS_TOKEN}from'../constants';import{Link}from'react-router-dom';import{Form,Input,Button,Icon,notification}from'antd';var FormItem=Form.Item;var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(){_classCallCheck(this,Login);return _possibleConstructorReturn(this,_getPrototypeOf(Login).apply(this,arguments));}_createClass(Login,[{key:\"render\",value:function render(){var AntWrappedLoginForm=Form.create()(LoginForm);return React.createElement(\"div\",{className:\"login-container\"},React.createElement(\"h1\",{className:\"page-title\"},\"Login\"),React.createElement(\"div\",{className:\"login-content\"},React.createElement(AntWrappedLoginForm,{onLogin:this.props.onLogin})));}}]);return Login;}(Component);var LoginForm=/*#__PURE__*/function(_Component2){_inherits(LoginForm,_Component2);function LoginForm(props){var _this;_classCallCheck(this,LoginForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(LoginForm).call(this,props));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(LoginForm,[{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;event.preventDefault();this.props.form.validateFields(function(err,values){if(!err){var loginRequest=Object.assign({},values);login(loginRequest).then(function(response){localStorage.setItem(ACCESS_TOKEN,response.accessToken);_this2.props.onLogin();console.log(\"login\");}).catch(function(error){if(error.status===401){notification.error({message:'Cheeze Toon',description:'아이디 혹은 비밀번호가 일치하지 않습니다. 다시 시도해주세요.'});}else{notification.error({message:'Cheeze Toon',description:error.message||'다시 시도해주세요.'});}});}});}},{key:\"render\",value:function render(){var getFieldDecorator=this.props.form.getFieldDecorator;return React.createElement(Form,{onSubmit:this.handleSubmit,className:\"login-form\"},React.createElement(FormItem,null,getFieldDecorator('usernameOrEmail',{rules:[{required:true,message:'아이디 혹은 이메일을 입력해주세요.'}]})(React.createElement(Input,{prefix:React.createElement(Icon,{type:\"user\"}),size:\"large\",name:\"usernameOrEmail\",placeholder:\"Username or Email\"}))),React.createElement(FormItem,null,getFieldDecorator('password',{rules:[{required:true,message:'비밀번호를 입력해주세요.'}]})(React.createElement(Input,{prefix:React.createElement(Icon,{type:\"lock\"}),size:\"large\",name:\"password\",type:\"password\",placeholder:\"Password\"}))),React.createElement(FormItem,null,React.createElement(Button,{type:\"primary\",htmlType:\"submit\",size:\"large\",className:\"login-form-button\"},\"Login\"),\"Or \",React.createElement(Link,{to:\"/signup\"},\"register now!\")));}}]);return LoginForm;}(Component);export default Login;","map":{"version":3,"sources":["C:/Users/Son/Desktop/test6/test6/frontend/src/login/Login.js"],"names":["React","Component","useState","login","ACCESS_TOKEN","Link","Form","Input","Button","Icon","notification","FormItem","Item","Login","AntWrappedLoginForm","create","LoginForm","props","onLogin","handleSubmit","bind","event","preventDefault","form","validateFields","err","values","loginRequest","Object","assign","then","response","localStorage","setItem","accessToken","console","log","catch","error","status","message","description","getFieldDecorator","rules","required"],"mappings":"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","sourcesContent":["import React, {Component, useState} from 'react';\r\nimport './Login.css';\r\nimport { login } from '../util/APIUtils';\r\nimport { ACCESS_TOKEN } from '../constants';\r\nimport { Link } from 'react-router-dom';\r\nimport { Form, Input, Button, Icon, notification } from 'antd';\r\nconst FormItem = Form.Item;\r\n\r\nclass Login extends Component {\r\n    render() {\r\n        const AntWrappedLoginForm = Form.create()(LoginForm)\r\n        return (\r\n            <div className=\"login-container\">\r\n                <h1 className=\"page-title\">Login</h1>\r\n                <div className=\"login-content\">\r\n                    <AntWrappedLoginForm onLogin={this.props.onLogin} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nclass LoginForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();   \r\n        this.props.form.validateFields((err, values) => {\r\n            if (!err) {\r\n                const loginRequest = Object.assign({}, values);\r\n                login(loginRequest)\r\n                .then(response => {\r\n                    localStorage.setItem(ACCESS_TOKEN, response.accessToken);\r\n                    this.props.onLogin();\r\n                    console.log(\"login\");\r\n                }).catch(error => {\r\n                    if(error.status === 401) {\r\n                        notification.error({\r\n                            message: 'Cheeze Toon',\r\n                            description: '아이디 혹은 비밀번호가 일치하지 않습니다. 다시 시도해주세요.'\r\n                        });                    \r\n                    } else {\r\n                        notification.error({\r\n                            message: 'Cheeze Toon',\r\n                            description: error.message || '다시 시도해주세요.'\r\n                        });                                            \r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { getFieldDecorator } = this.props.form;\r\n        return (\r\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n                <FormItem>\r\n                    {getFieldDecorator('usernameOrEmail', {\r\n                        rules: [{ required: true, message: '아이디 혹은 이메일을 입력해주세요.' }],\r\n                    })(\r\n                    <Input \r\n                        prefix={<Icon type=\"user\" />}\r\n                        size=\"large\"\r\n                        name=\"usernameOrEmail\" \r\n                        placeholder=\"Username or Email\" />    \r\n                    )}\r\n                </FormItem>\r\n                <FormItem>\r\n                {getFieldDecorator('password', {\r\n                    rules: [{ required: true, message: '비밀번호를 입력해주세요.' }],\r\n                })(\r\n                    <Input \r\n                        prefix={<Icon type=\"lock\" />}\r\n                        size=\"large\"\r\n                        name=\"password\" \r\n                        type=\"password\" \r\n                        placeholder=\"Password\"  />                        \r\n                )}\r\n                </FormItem>\r\n                <FormItem>\r\n                    <Button type=\"primary\" htmlType=\"submit\" size=\"large\" className=\"login-form-button\">Login</Button>\r\n                    Or <Link to=\"/signup\">register now!</Link>\r\n                </FormItem>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}